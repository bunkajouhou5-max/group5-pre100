<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>災害意識診断</title>

<style>
body {
    font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", sans-serif;
    background-color: #FFF8E7;
    margin: 0;
    padding: 20px;
}

h1, h2 {
    text-align: center;
}

/* 質問カード */
.question-card {
    background-color: white;
    padding: 1.4rem 1.6rem;
    border-radius: 1rem;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    margin-bottom: 1.3rem;
}

/* ボタン */
button {
    padding: 12px 24px;
    border-radius: 999px;
    border: none;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    width: 45%;
}

.yes-btn { background-color: #FF6B6B; color: white; }
.no-btn  { background-color: #4CAF50; color: white; }
.nav-btn { background-color: #EEEEEE; color: #333; border: 1px solid #CCC; }

.btn-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 20px;
}

.section {
    max-width: 500px;
    margin: auto;
}

.correct {
    color: #2E8B57;
    font-weight: bold;
}

.wrong {
    color: #D9534F;
    font-weight: bold;
}
</style>
</head>
<body>

<div id="app" class="section"></div>

<script>
/* ============================
   ★ 質問データ
   ・correct: 正解（true=はい が正解、false=いいえ が正解）
   ・desc: 不正解だった場合の解説
============================ */
const QUESTIONS = [
    {id: 1, label: "災害前", text: "非常食は一日分あれば十分である", correct: false,
     desc: "災害時は物流が止まり、支援が届くまでに数日かかることがあるよ。最低でも3日、可能であれば7日分の備蓄が推奨されているよ"},
    {id: 2, label: "災害前", text: "飲料水は一人一日1リットルあれば足りる。", correct: false,
     desc: "飲料・調理・最低限の衛生を考えると一人一日3リットルが目安です。"},
    {id: 3, label: "災害前", text: "防災グッズは玄関やすぐ持ち出せる場所に置くべきである", correct: true,
     desc: "災害時に探す時間はありません。すぐに手に取れる場所においておくことが重要です。"},
    {id: 4, label: "災害前", text: "避難所の場所は、災害が起きてから調べればよい", correct: false,
     desc: "災害直後は停電や通信障害で調べられない可能性があります。事前に場所とルートを確認しておきましょう"},
    {id: 5, label: "災害前", text: "家族と避難場所や連絡方法を決めておく必要はない。", correct: false,
     desc: "災害時は連絡が取れなくなることが多いです。集合場所や連絡手段を事前に決めることが命を守ります。"},
    {id: 6, label: "災害前", text: "家具の転倒防止対策は、地震が多い地域だけがすれば良い", correct: false,
     desc: "日本全国どこでも地震は起こる。家具の転倒は大きなけがの原因になるため、地域に関係なく対策が必要です。"},
    {id: 7, label: "災害前", text: "懐中電灯や予備電池は防災グッズとして重要である", correct: true,
     desc: "停電時に明かりがないと危険です。夜間や避難や情報確認に必須です。"},
    {id: 8, label: "災害前", text: "スマートフォンがあればラジオは不要である", correct: false,
     desc: "スマホは充電切れや通信障害の恐れがあります。電池式・手回しラジオは非常に有効です"},
    {id: 9, label: "災害前", text: "自宅周辺の危険（川・崖・古い建物）を把握しておくことは大切である。", correct: true,
     desc: "ハザードマップを確認し、どこが危険かを知ることが安全な避難避難につながります。"},
    {id: 10, label: "災害前", text: "防災訓練は実際の災害では役に立たない。", correct: false,
     desc: "訓練を経験していると、パニックになりにくく、行動が早くなることが分かっています"},
    {id: 11, label: "災害時", text: "地震の揺れを感じたら、すぐ外へ飛び出す。", correct: false,
     desc: "外はガラスや看板が落ちて危険です。まずは身を守る行動を優先します。"},
    {id: 12, label: "災害時", text: "地震の際は、机の下に隠れて頭を守ることが大切である。", correct: true,
     desc: "落下物から身を守る基本行動です。"},
    {id: 13, label: "災害時", text: "揺れている最中に火を消しに行くべきである。", correct: false,
     desc: "無理に動くと転倒の危険があります。揺れが収まってから行動します。"},
    {id: 14, label: "災害時", text: "エレベーターに乗っているときに地震が起きたら、そのまま乗り続ける。", correct: false,
     desc: "最寄り階で停止したらすぐ降り、階段で避難します。"},
    {id: 15, label: "災害時", text: "津波の恐れがある場合、様子を見てから避難する。", correct: false,
     desc: "津波は予想より早く到達することがあります。すぐ高い場所へ避難してください。"},
    {id: 16, label: "災害時", text: "屋外にいるときは、電柱やブロック塀から離れるべきである。", correct: true,
     desc: "倒壊の危険が高いためです。"},
    {id: 17, label: "災害時", text: "避難する際は、荷物をたくさん持って行く。", correct: false,
     desc: "動きにくくなり危険です。必要最低限にしましょう。"},
    {id: 18, label: "災害時", text: "デマ情報でも、善意であれば拡散してよい。", correct: false,
     desc: "誤情報は混乱を招きます。公式情報を確認しましょう。"},
    {id: 19, label: "災害時", text: "避難所では、周囲の人と協力することが大切である。", correct: true,
     desc: "助け合いが安全・健康維持につながります。"},
    {id: 20, label: "災害時", text: "余震が続く場合でも、油断してよい。", correct: false,
     desc: "余震による二次災害が起こる可能性があります。警戒を続けることが重要です"},
    {id: 21, label: "災害後", text: "災害関連死は、災害が直接原因でなければ起こらない。", correct: false,
     desc: "避難生活のストレスや体調悪化でも起こります。"},
    {id: 22, label: "災害後", text: "避難所や仮住まいでは、水分補給はあまり重要ではない。", correct: false,
     desc: "脱水や血栓症（エコノミー症候群）を防ぐため、水分補給は非常に重要です"},
    {id: 23, label: "災害後", text: "避難生活では、体を動かさなくても問題ない。", correct: false,
     desc: "運動不足は健康リスクを高めます。軽い体操でも効果あり。"},
    {id: 24, label: "災害後", text: "持病がある人は、薬の情報を把握しておくべきである。", correct: true,
     desc: "医療がすぐ受けられない場合に重要です。"},
    {id: 25, label: "災害後", text: "トイレを我慢することは健康に影響しない。", correct: false,
     desc: "水分摂取を控える原因になり、病気のリスクが高まります。"},
    {id: 26, label: "災害後", text: "避難所でのストレスは、気合で乗り切れる。", correct: false,
     desc: "心の不調も災害の影響です。周囲に相談することが大切です。"},
    {id: 27, label: "災害後", text: "災害後は、正確な情報を確認することが重要である。", correct: true,
     desc: "復旧・支援情報の取得に役立ちます。"},
    {id: 28, label: "災害後", text: "在宅避難でも、健康管理は不要である。", correct: false,
     desc: "自宅でも環境悪化やストレスは起こります"},
    {id: 29, label: "災害後", text: "睡眠不足は、災害後の体調不良の原因になる。", correct: true,
     desc: "免疫力低下や判断力低下につながります。"},
    {id: 30, label: "災害後", text: "災害後の生活再建には、周囲の支援制度を知ることが役に立つ", correct: true,
     desc: "支援金や相談窓口を利用することで、負担を減らせます。"}
];

let page = "home";
let i = 0;
let score = 0;
let wrongList = [];   // 不正解だった質問の一覧

/* ============================
   ★ 画面描画
============================ */
function render() {
    const app = document.getElementById("app");

    if (page === "home") {
        app.innerHTML = `
            <h1>災害意識診断⛑️</h1>
            <p>この診断はあなたの災害に関する理解度を分析します。</p>
            <div style="text-align:center;">
                <button class="nav-btn" onclick="startQuiz()">スタート ▶</button>
            </div>
        `;
    }

    else if (page === "quiz") {
        const q = QUESTIONS[i];

        app.innerHTML = `
            <h2>質問 ${i+1} / 全 ${QUESTIONS.length}</h2>

            <div class="question-card">
                <div style="color:#666;font-size:0.9rem;font-weight:600;margin-bottom:0.3rem;">
                    ${q.label}
                </div>
                <div style="font-size:1.1rem;">${q.text}</div>
            </div>

            <div class="btn-row">
                <button class="yes-btn" onclick="choose(true)">〇</button>
                <button class="no-btn" onclick="choose(false)">×</button>
            </div>

            <div class="btn-row">
                <button class="nav-btn" onclick="prev()" ${i===0 ? "disabled" : ""}>前へ</button>
                <button class="nav-btn" onclick="goHome()">最初に戻る</button>
            </div>
        `;
    }

    else if (page === "result") {
        const percent = Math.round((score / QUESTIONS.length) * 100);

        let wrongHtml = "";
        wrongList.forEach(item => {
            wrongHtml += `
                <div class="question-card">
                    <div class="wrong">✖ ${item.text}</div>
                    <p>${item.desc}</p>
                </div>
            `;
        });

        app.innerHTML = `
            <h1>診断結果</h1>
            <h2>${percent}% の理解度です！</h2>

            <h3>不正解だった問題と解説</h3>
            ${wrongHtml || "<p class='correct'>全問正解です！素晴らしい！</p>"}

            <div style="text-align:center; margin-top:20px;">
                <button class="nav-btn" onclick="goHome()">もう一度診断する</button>
            </div>
        `;
    }
}

/* ============================
   ★ 質問開始
============================ */
function startQuiz() {
    page = "quiz";
    i = 0;
    score = 0;
    wrongList = [];
    render();
}

/* ============================
   ★ 回答処理
============================ */
function choose(answer) {
    const q = QUESTIONS[i];

    if (answer === q.correct) {
        score += 1; // 正解
    } else {
        wrongList.push(q); // 不正解データを保存
    }

    if (i === QUESTIONS.length - 1) {
        page = "result";
    } else {
        i += 1;
    }
    render();
}

/* ============================
   ★ 前の質問へ
============================ */
function prev() {
    if (i > 0) i -= 1;
    render();
}

/* ============================
   ★ ホームへ戻る
============================ */
function goHome() {
    page = "home";
    render();
}

render();
</script>

</body>
</html>
